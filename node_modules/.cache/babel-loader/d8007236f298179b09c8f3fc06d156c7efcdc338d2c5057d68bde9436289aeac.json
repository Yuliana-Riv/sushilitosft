{"ast":null,"code":"import { mapActions } from \"vuex\";\nimport AddPho from \"./addPho.vue\";\nimport EditPho from \"./editPho.vue\";\nexport default {\n  name: \"phone\",\n  components: {\n    AddPho,\n    EditPho\n  },\n  data() {\n    return {\n      status: \"\",\n      message: \"\",\n      item: \"\",\n      search_value: \"\",\n      updsearchcli: \"\",\n      currentPage: 1,\n      itemsPerPage: 12,\n      active: false,\n      viewModal: false,\n      itemDel: \"\",\n      radius: false\n    };\n  },\n  async created() {\n    await this.getIdentity();\n    if (this.identity.role == \"colaborador\") {\n      this.getInfoByIdPho({\n        id: this.identity.sub,\n        option: \"phone/colaborador\"\n      });\n    } else {\n      this.getAllInfoPho(\"phone\");\n    }\n  },\n  computed: {\n    identity() {\n      return this.$store.getters[\"admin/getIdentity\"];\n    },\n    data() {\n      let data = this.$store.getters[\"phone/data\"];\n      if (!Array.isArray(data)) return [];\n      if (this.search_value != \"\") {\n        let filt = data.filter(item => this.includesItem(this.search_value, item.name));\n        data = filt;\n      }\n      return data;\n    },\n    historyOption() {\n      return this.$store.getters[\"phone/getHistoryOption\"];\n    },\n    //Paginacion\n    allItems() {\n      return Object.keys(this.data).map(pid => this.data[pid]);\n    },\n    filteredItems() {\n      return this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    },\n    totalPages() {\n      let total = Math.ceil(this.allItems.length / this.itemsPerPage);\n      if (total < this.currentPage) {\n        this.currentPage = 1;\n      }\n      return total;\n    }\n  },\n  methods: {\n    ...mapActions(\"phone\", [\"getAllInfoPho\"]),\n    ...mapActions(\"phone\", [\"setHistoryOptionPho\"]),\n    ...mapActions(\"phone\", [\"setAddedPho\"]),\n    ...mapActions(\"phone\", [\"getInfoByIdPho\"]),\n    getIdentity: async function () {\n      let response = await this.$store.dispatch(\"admin/getData\");\n      return response;\n    },\n    includesItem(search, name) {\n      name = name.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n      if (search == \"\") {\n        return true;\n      }\n      name = name.toLowerCase();\n      search = search.toLowerCase();\n      if (search == \"\") {\n        return false;\n      }\n      return name.includes(search);\n    },\n    changeView(option, item) {\n      this.item = item;\n      this.setAddedPho(item);\n      this.setHistoryOptionPho(option);\n    },\n    activeRadius() {\n      this.radius ? this.radius = false : this.radius = true;\n    },\n    showModal: function (id) {\n      this.itemDel = id;\n      this.viewModal = true;\n    },\n    closeModal: function () {\n      this.viewModal = false;\n      this.itemDel = \"\";\n    },\n    wait: function () {\n      setTimeout(() => this.$router.go(), 200);\n    },\n    delStatus: function () {\n      setTimeout(() => this.delMsgs(), 2000);\n      setTimeout(() => this.wait(), 500);\n    },\n    delMsgs: function () {\n      this.status = \"\";\n      this.message = \"\";\n    },\n    eliminar: async function () {\n      let id = this.itemDel;\n      this.status = \"\";\n      this.message = \"\";\n      let result = await this.$store.dispatch(\"phone/deleteItemPho\", {\n        option: \"phone\",\n        id: id\n      });\n      if (result.status == \"error\") {\n        this.message = result.message;\n        this.status = \"error\";\n        this.delStatus();\n      } else {\n        this.status = \"\";\n        this.message = \"\";\n        this.wait();\n      }\n    },\n    closeSelect() {\n      document.getElementById(\"select-ch\").checked = false;\n      this.active = false;\n    },\n    // botones de paginacion.\n    next() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prev() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapActions","AddPho","EditPho","name","components","data","status","message","item","search_value","updsearchcli","currentPage","itemsPerPage","active","viewModal","itemDel","radius","created","getIdentity","identity","role","getInfoByIdPho","id","sub","option","getAllInfoPho","computed","$store","getters","Array","isArray","filt","filter","includesItem","historyOption","allItems","Object","keys","map","pid","filteredItems","slice","totalPages","total","Math","ceil","length","methods","response","dispatch","search","normalize","replace","toLowerCase","includes","changeView","setAddedPho","setHistoryOptionPho","activeRadius","showModal","closeModal","wait","setTimeout","$router","go","delStatus","delMsgs","eliminar","result","closeSelect","document","getElementById","checked","next","prev"],"sources":["src/views/telefono/telefono.vue"],"sourcesContent":["<template>\r\n  <div id=\"phone\">\r\n    <div v-if=\"historyOption == 'Default'\">\r\n      <div class=\"dflx\">\r\n        <p class=\"noitems\">\r\n          No. de items <span> {{ data.length }}</span>\r\n        </p>\r\n\r\n        <div class=\"select-container\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"select-ch\"\r\n            id=\"select-ch\"\r\n            v-model=\"active\"\r\n            true-value=\"true\"\r\n            false-value=\"false\"\r\n          />\r\n          <label for=\"select-ch\">\r\n            <div id=\"select-items\" :class=\"{ rounded: active }\">\r\n              Items por página: {{ itemsPerPage }}\r\n            </div>\r\n          </label>\r\n          <div class=\"options-cont\" @click=\"closeSelect()\">\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"6\"\r\n              @click=\"itemsPerPage = '6'\"\r\n            >\r\n              6\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"12\"\r\n              @click=\"itemsPerPage = '12'\"\r\n            >\r\n              12\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"18\"\r\n              @click=\"itemsPerPage = '18'\"\r\n            >\r\n              18\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"24\"\r\n              @click=\"itemsPerPage = '24'\"\r\n            >\r\n              24\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"buscador dflx\">\r\n          <input\r\n            v-model=\"search_value\"\r\n            type=\"search\"\r\n            id=\"input-search\"\r\n            class=\"form-control\"\r\n            :placeholder=\"'Búsqueda'\"\r\n          />\r\n          <div class=\"icon_buscar\">\r\n            <img src=\"../../assets/default/Search.png\" alt=\"icono buscar\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div @click=\"changeView('Add', '')\" class=\"btn_añadir dflx\">\r\n        <p>AGREGAR</p>\r\n        <img src=\"../../assets/default/add.png\" alt=\"\" />\r\n      </div>\r\n\r\n      <div class=\"tbl_usuarios\">\r\n        <div class=\"tbl_header dflx\">\r\n          <div class=\"tblh tblrad\">\r\n            <p>TELÉFONO</p>\r\n          </div>\r\n          <div class=\"tblh\">\r\n            <p>TIPO</p>\r\n          </div>\r\n          <div class=\"tblh\">\r\n            <p>LINK</p>\r\n          </div>\r\n          <div class=\"tblh2\">\r\n            <p>BORRAR</p>\r\n          </div>\r\n          <div class=\"tblh2 tblh2r\">\r\n            <p>EDITAR</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div tbl_content>\r\n          <div v-if=\"data.length > 0\">\r\n            <div\r\n              class=\"tbl_items dflx\"\r\n              v-for=\"(item, key) in filteredItems\"\r\n              :key=\"key\"\r\n            >\r\n              <div class=\"tbl_item\">\r\n                <p>{{ item.phone }}</p>\r\n              </div> \r\n              <div class=\"tbl_item\">\r\n                <p>{{ item.type }}</p>\r\n              </div>\r\n              <div class=\"tbl_item\">\r\n                <p><a :href=\"item.link\">{{ item.link }}</a> </p>\r\n              </div>\r\n\r\n              <div class=\"icon_editar\">\r\n                <img\r\n                  @click=\"changeView('Edit', item)\"\r\n                  src=\"../../assets/default/i_editar.png\"\r\n                  alt=\"icono editar\"\r\n                />\r\n              </div>\r\n              <div class=\"icon_eliminar\">\r\n                <img\r\n                  @click=\"showModal(item.id)\"\r\n                  src=\"../../assets/default/i_eliminar.png\"\r\n                  alt=\"icono eliminar\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n            <p class=\"snu\">Aun no hay registros.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"navigate-buttons\" class=\"mlf\">\r\n        <div class=\"dflx\">\r\n          <button @click=\"prev\" id=\"btn-prev\" class=\"btn-navigate\">\r\n            <img src=\"../../assets/default/Left.png\" alt=\"icono anterior\" />\r\n          </button>\r\n          <p class=\"num-pages\">{{ currentPage }} / {{ totalPages }}</p>\r\n          <button @click=\"next\" id=\"btn-next\" class=\"btn-navigate\">\r\n            <img src=\"../../assets/default/Right.png\" alt=\"icono siguiente\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"historyOption == 'Add'\">\r\n      <!-- Agregar phone -->\r\n      <AddPho />\r\n    </div>\r\n    <div v-if=\"historyOption == 'Edit'\">\r\n      <!-- Editar phone -->\r\n      <EditPho />\r\n    </div>\r\n\r\n    <div v-if=\"status != ''\" class=\"status_messages\">\r\n      <div v-if=\"status == 'success'\" class=\"msg msg_success\">\r\n        <p>{{ message }}</p>\r\n      </div>\r\n      <div v-if=\"status == 'error'\" class=\"msg msg_error\">\r\n        <p>{{ message }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"viewModal\" class=\"modal_view\">\r\n      <div id=\"modal_delete\">\r\n        <div class=\"body\">\r\n          <img src=\"../../assets/default/alert.png\" alt=\"icono alerta\" />\r\n          <h3>\r\n            ¿Estás seguro de\r\n            <span\r\n              >eliminar <br />\r\n              este teléfono?</span\r\n            >\r\n          </h3>\r\n        </div>\r\n\r\n        <div class=\"modal_del_btns dflx\">\r\n          <p @click=\"eliminar()\">Aceptar</p>\r\n          <p @click=\"closeModal()\">Cancelar</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport AddPho from \"./addPho.vue\";\r\nimport EditPho from \"./editPho.vue\";\r\nexport default {\r\n  name: \"phone\",\r\n  components: {\r\n    AddPho,\r\n    EditPho,\r\n  },\r\n  data() {\r\n    return {\r\n      status: \"\",\r\n      message: \"\",\r\n      item: \"\",\r\n      search_value: \"\",\r\n      updsearchcli: \"\",\r\n      currentPage: 1,\r\n      itemsPerPage: 12,\r\n      active: false,\r\n      viewModal: false,\r\n      itemDel: \"\",\r\n      radius: false,\r\n    };\r\n  },\r\n  async created() {\r\n    await this.getIdentity();\r\n    if (this.identity.role == \"colaborador\") {\r\n      this.getInfoByIdPho({\r\n        id: this.identity.sub,\r\n        option: \"phone/colaborador\",\r\n      });\r\n    } else {\r\n      this.getAllInfoPho(\"phone\");\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    identity() {\r\n      return this.$store.getters[\"admin/getIdentity\"];\r\n    },\r\n    data() {\r\n      let data = this.$store.getters[\"phone/data\"];\r\n\r\n      if (!Array.isArray(data)) return [];\r\n\r\n      if (this.search_value != \"\") {\r\n        let filt = data.filter((item) =>\r\n          this.includesItem(this.search_value, item.name)\r\n        );\r\n        data = filt;\r\n      }\r\n\r\n      return data;\r\n    },\r\n    historyOption() {\r\n      return this.$store.getters[\"phone/getHistoryOption\"];\r\n    },\r\n\r\n    //Paginacion\r\n    allItems() {\r\n      return Object.keys(this.data).map((pid) => this.data[pid]);\r\n    },\r\n    filteredItems() {\r\n      return this.allItems.slice(\r\n        (this.currentPage - 1) * this.itemsPerPage,\r\n        this.currentPage * this.itemsPerPage\r\n      );\r\n    },\r\n    totalPages() {\r\n      let total = Math.ceil(this.allItems.length / this.itemsPerPage);\r\n      if (total < this.currentPage) {\r\n        this.currentPage = 1;\r\n      }\r\n      return total;\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(\"phone\", [\"getAllInfoPho\"]),\r\n    ...mapActions(\"phone\", [\"setHistoryOptionPho\"]),\r\n    ...mapActions(\"phone\", [\"setAddedPho\"]),\r\n    ...mapActions(\"phone\", [\"getInfoByIdPho\"]),\r\n\r\n    getIdentity: async function () {\r\n      let response = await this.$store.dispatch(\"admin/getData\");\r\n      return response;\r\n    },\r\n    includesItem(search, name) {\r\n      name = name.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\r\n      if (search == \"\") {\r\n        return true;\r\n      }\r\n      name = name.toLowerCase();\r\n      search = search.toLowerCase();\r\n      if (search == \"\") {\r\n        return false;\r\n      }\r\n      return name.includes(search);\r\n    },\r\n    changeView(option, item) {\r\n      this.item = item;\r\n      this.setAddedPho(item);\r\n      this.setHistoryOptionPho(option);\r\n    },\r\n\r\n    activeRadius() {\r\n      this.radius ? (this.radius = false) : (this.radius = true);\r\n    },\r\n\r\n    showModal: function (id) {\r\n      this.itemDel = id;\r\n      this.viewModal = true;\r\n    },\r\n    closeModal: function () {\r\n      this.viewModal = false;\r\n      this.itemDel = \"\";\r\n    },\r\n\r\n    wait: function () {\r\n      setTimeout(() => this.$router.go(), 200);\r\n    },\r\n\r\n    delStatus: function () {\r\n      setTimeout(() => this.delMsgs(), 2000);\r\n      setTimeout(() => this.wait(), 500);\r\n    },\r\n    delMsgs: function () {\r\n      this.status = \"\";\r\n      this.message = \"\";\r\n    },\r\n\r\n    eliminar: async function () {\r\n      let id = this.itemDel;\r\n      this.status = \"\";\r\n      this.message = \"\";\r\n\r\n      let result = await this.$store.dispatch(\"phone/deleteItemPho\", {\r\n        option: \"phone\",\r\n        id: id,\r\n      });\r\n\r\n      if (result.status == \"error\") {\r\n        this.message = result.message;\r\n        this.status = \"error\";\r\n        this.delStatus();\r\n      } else {\r\n        this.status = \"\";\r\n        this.message = \"\";\r\n        this.wait();\r\n      }\r\n    },\r\n    closeSelect() {\r\n      document.getElementById(\"select-ch\").checked = false;\r\n      this.active = false;\r\n    },\r\n\r\n    // botones de paginacion.\r\n    next() {\r\n      if (this.currentPage < this.totalPages) {\r\n        this.currentPage++;\r\n      }\r\n    },\r\n    prev() {\r\n      if (this.currentPage > 1) {\r\n        this.currentPage--;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.tbl_usuarios {\r\n  margin-top: 1.9791666666666665vw;\r\n  width: 48.4vw;\r\n}\r\n\r\n.tbl_items {\r\n  border-bottom: 1px solid var(--color-3);\r\n}\r\n\r\n.tbl_item {\r\n  overflow: auto;\r\n}\r\n.tblh {\r\n  width: 10.78125vw;\r\n  height: 2.5vw;\r\n  background: var(--color-2);\r\n  border-right: 1px solid var(--color-5);\r\n}\r\n.tblh2 {\r\n  width: 2.5vw;\r\n  height: 2.5vw;\r\n  background: var(--color-3);\r\n  border-right: 1px solid var(--color-5);\r\n}\r\n.tblh p {\r\n  padding-left: 1.3541666666666667vw;\r\n  color: var(--color-5);\r\n  font-size: 0.7291666666666666vw;\r\n  font-weight: 500;\r\n}\r\n.tblh2 p {\r\n  padding-top: 0.5vw;\r\n  padding-left: 0.3vw;\r\n  color: var(--color-5);\r\n  font-size: 0.46875vw;\r\n  font-weight: 700;\r\n}\r\n\r\n.icon_editar,\r\n.icon_eliminar {\r\n  width: 2.5vw;\r\n  height: 2.5vw;\r\n}\r\n\r\n.icon_editar img,\r\n.icon_eliminar img {\r\n  width: 0.8333333333333334vw;\r\n  height: 0.8333333333333334vw;\r\n  padding-top: 0.9vw;\r\n  padding-left: 0.9vw;\r\n  cursor: pointer;\r\n}\r\n.tblrad {\r\n  border-radius: 1.5vw 0vw 0vw 1.5vw;\r\n}\r\n\r\n.tblh2r {\r\n  border-radius: 0vw 0.5vw 0.5vw 0vw;\r\n}\r\n\r\n.tbl_item {\r\n  width: 10.78125vw;\r\n}\r\n.tbl_item p {\r\n  padding-left: 1.3541666666666667vw;\r\n}\r\n\r\n.mlf {\r\n  margin-left: 43vw !important;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}