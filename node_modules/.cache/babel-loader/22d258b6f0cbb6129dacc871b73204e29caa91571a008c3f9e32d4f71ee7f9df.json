{"ast":null,"code":"import { mapActions } from 'vuex';\nimport AddU from './addUser.vue';\nimport EditU from './editUser.vue';\nexport default {\n  name: 'Usuarios',\n  components: {\n    AddU,\n    EditU\n  },\n  data() {\n    return {\n      status: '',\n      message: '',\n      item: '',\n      search_value: '',\n      updsearchcli: '',\n      currentPage: 1,\n      itemsPerPage: 12,\n      active: false,\n      viewModal: false,\n      itemDel: '',\n      radius: false\n    };\n  },\n  created() {\n    this.getAllInfoUsr('usuarios');\n  },\n  computed: {\n    data() {\n      let data = this.$store.getters[\"usuarios/data\"];\n      if (!Array.isArray(data)) return [];\n      if (this.search_value != '') {\n        let filt = data.filter(item => this.includesItem(this.search_value, item.name));\n        data = filt;\n      }\n      return data;\n    },\n    historyOption() {\n      return this.$store.getters[\"usuarios/getHistoryOption\"];\n    },\n    //Paginacion\n    allItems() {\n      return Object.keys(this.data).map(pid => this.data[pid]);\n    },\n    filteredItems() {\n      return this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    },\n    totalPages() {\n      let total = Math.ceil(this.allItems.length / this.itemsPerPage);\n      if (total < this.currentPage) {\n        this.currentPage = 1;\n      }\n      return total;\n    }\n  },\n  methods: {\n    ...mapActions('usuarios', ['getAllInfoUsr']),\n    ...mapActions('usuarios', ['setHistoryOptionUsr']),\n    ...mapActions('usuarios', ['setAddedUsr']),\n    includesItem(search, name) {\n      name = name.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n      if (search == '') {\n        return true;\n      }\n      name = name.toLowerCase();\n      search = search.toLowerCase();\n      if (search == '') {\n        return false;\n      }\n      return name.includes(search);\n    },\n    changeView(option, item) {\n      this.item = item;\n      this.setAddedUsr(item);\n      this.setHistoryOptionUsr(option);\n    },\n    activeRadius() {\n      this.radius ? this.radius = false : this.radius = true;\n    },\n    showModal: function (id) {\n      this.itemDel = id;\n      this.viewModal = true;\n    },\n    closeModal: function () {\n      this.viewModal = false;\n      this.itemDel = '';\n    },\n    wait: function () {\n      setTimeout(() => this.$router.go(), 200);\n    },\n    delStatus: function () {\n      setTimeout(() => this.delMsgs(), 2000);\n      setTimeout(() => this.wait(), 500);\n    },\n    delMsgs: function () {\n      this.status = \"\";\n      this.message = \"\";\n    },\n    eliminar: async function () {\n      let id = this.itemDel;\n      this.status = '';\n      this.message = '';\n      let result = await this.$store.dispatch(\"usuarios/deleteItemUsr\", {\n        option: 'user',\n        id: id\n      });\n      if (result.status == 'error') {\n        this.message = result.message;\n        this.status = 'error';\n        this.delStatus();\n      } else {\n        this.status = '';\n        this.message = '';\n        this.wait();\n      }\n    },\n    closeSelect() {\n      document.getElementById(\"select-ch\").checked = false;\n      this.active = false;\n    },\n    // botones de paginacion.\n    next() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prev() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapActions","AddU","EditU","name","components","data","status","message","item","search_value","updsearchcli","currentPage","itemsPerPage","active","viewModal","itemDel","radius","created","getAllInfoUsr","computed","$store","getters","Array","isArray","filt","filter","includesItem","historyOption","allItems","Object","keys","map","pid","filteredItems","slice","totalPages","total","Math","ceil","length","methods","search","normalize","replace","toLowerCase","includes","changeView","option","setAddedUsr","setHistoryOptionUsr","activeRadius","showModal","id","closeModal","wait","setTimeout","$router","go","delStatus","delMsgs","eliminar","result","dispatch","closeSelect","document","getElementById","checked","next","prev"],"sources":["src/views/usuarios/usuarios.vue"],"sourcesContent":["<template>\r\n    <div id=\"Usuarios\">\r\n           \r\n             <div v-if=\"historyOption =='Default'\">\r\n                   <div class=\"dflx\">\r\n                        <p class=\"noitems\">No. de items <span > {{data.length}}</span>  </p>\r\n                         \r\n        <div class=\"select-container\">\r\n          <input type=\"checkbox\" name=\"select-ch\" id=\"select-ch\" v-model=\"active\" true-value=\"true\" false-value=\"false\"/>\r\n          <label for=\"select-ch\">\r\n            <div id=\"select-items\" :class=\"{'rounded' : active}\">\r\n                Items por página: {{itemsPerPage}}\r\n            </div>\r\n          </label>\r\n          <div class=\"options-cont\" @click=\"closeSelect()\">\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"6\"\r\n              @click=\"itemsPerPage = '6'\"\r\n            >\r\n              6\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"12\"\r\n              @click=\"itemsPerPage = '12'\"\r\n            >\r\n              12\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"18\"\r\n              @click=\"itemsPerPage = '18'\"\r\n            >\r\n              18\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"24\"\r\n              @click=\"itemsPerPage = '24'\"\r\n            >\r\n              24\r\n            </div>\r\n          </div>\r\n        </div>\r\n                         <div class=\"buscador dflx\">\r\n                              <input v-model=\"search_value\" type=\"search\" id=\"input-search\" class=\"form-control\" :placeholder=\"'Búsqueda'\"  />\r\n                              <div class=\"icon_buscar\">\r\n                              <img  src=\"../../assets/default/Search.png\" alt=\"icono buscar\">\r\n                              </div>\r\n\r\n                        </div>\r\n\r\n\r\n\r\n\r\n\r\n                   </div>\r\n\r\n                     <div  @click=\"changeView('Add','')\"  class=\"btn_añadir dflx\">\r\n                                <p  > AGREGAR</p>  <img src=\"../../assets/default/add.png\" alt=\"\">\r\n                     </div>\r\n\r\n\r\n                       <div class=\"tbl_usuarios\">\r\n            <div class=\"tbl_header dflx\">\r\n                <div class=\"tblh tblrad\">\r\n                    <p>NOMBRE</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                    <p>APELLIDOS</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                   <p>CORREO</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                  <p>ROL</p>\r\n                </div>\r\n                 <div class=\"tblh2 \">\r\n                   \r\n                    <p>BORRAR</p>\r\n                </div>\r\n                 <div class=\"tblh2  tblh2r \">\r\n                   \r\n                    <p>EDITAR</p>\r\n                </div>\r\n                 \r\n            </div>\r\n            <div tbl_content>\r\n                <div  v-if=\"data.length>0\">\r\n                    <div class=\"tbl_items dflx\" v-for=\"(item, key) in filteredItems\" :key=\"key\">\r\n                        <div class=\"tbl_item \">\r\n                            <p>{{item.name}}</p>\r\n                        </div>\r\n                        <div class=\"tbl_item \">\r\n                            <p>{{item.lastname}}</p>\r\n                        </div>\r\n                        <div class=\"tbl_item \">\r\n                               <p>{{item.email}}</p>\r\n                        </div>\r\n                        <div class=\"tbl_item \">\r\n                               <p><!--{{item.role}}-->Asesor Profesional</p>\r\n                        </div>\r\n                       \r\n                            <div class=\"icon_editar\">\r\n                                <img   @click=\"changeView('Edit',item)\" src=\"../../assets/default/i_editar.png\" alt=\"icono editar\"   >\r\n                            </div>\r\n                            <div class=\"icon_eliminar\">\r\n                                <img  @click=\"showModal(item.id)\" src=\"../../assets/default/i_eliminar.png\" alt=\"icono eliminar\" >\r\n                            </div>\r\n                        \r\n                    </div>\r\n                </div>  \r\n                <div v-else>\r\n                    <p class=\"snu\">Aun no hay registros.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div  id=\"navigate-buttons\" class=\"mlf\">\r\n                    <div class=\"dflx\">\r\n                        <button @click=\"prev\" id=\"btn-prev\" class=\"btn-navigate  \"><img src=\"../../assets/default/Left.png\" alt=\"icono anterior\"></button>\r\n                        <p class=\"num-pages\">{{currentPage}} / {{totalPages}}</p>\r\n                        <button @click=\"next\"  id=\"btn-next\" class=\"btn-navigate  \"><img src=\"../../assets/default/Right.png\" alt=\"icono siguiente\"></button>\r\n                     </div>\r\n        </div>\r\n\r\n\r\n\r\n             </div>\r\n             <div v-if=\"historyOption =='Add'\">\r\n                 <!-- Agregar usuarios -->\r\n                 <AddU/>\r\n             </div>\r\n             <div v-if=\"historyOption =='Edit'\">\r\n               <!-- Editar usuarios -->\r\n               <EditU/>\r\n             </div>\r\n         \r\n\r\n\r\n             <div v-if=\"status !=''\" class=\"status_messages\">\r\n                            <div v-if=\"status =='success'\" class=\"msg msg_success\">\r\n                                 <p>{{message}}</p>\r\n                            </div>\r\n                            <div  v-if=\"status =='error'\" class=\"msg msg_error\">\r\n                                <p>{{message}}</p>\r\n                            </div>\r\n        </div>\r\n\r\n         \r\n           <div v-if=\"viewModal\" class=\"modal_view\">\r\n           \r\n            <div id=\"modal_delete\">\r\n                <div class=\"body\">\r\n                     <img src=\"../../assets/default/alert.png\" alt=\"icono alerta\">\r\n            <h3 >¿Estás seguro de  <span>eliminar <br> este usuario?</span></h3>\r\n                </div>\r\n           \r\n            <div class=\"modal_del_btns dflx\">\r\n                <p @click=\"eliminar()\">Aceptar</p>   <p  @click=\"closeModal()\" >Cancelar</p>\r\n            </div>\r\n          </div>\r\n        </div> \r\n      \r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapActions} from 'vuex';\r\nimport AddU from './addUser.vue'\r\nimport EditU from './editUser.vue'\r\nexport default {\r\n  name: 'Usuarios',\r\n  components:{\r\n   AddU,\r\n   EditU \r\n  },\r\n    data(){\r\n       return{\r\n        \r\n           status:'',\r\n           message:'',\r\n           item: '',\r\n           search_value:'',\r\n           updsearchcli:'',\r\n           currentPage: 1,\r\n           itemsPerPage:   12,\r\n active:false,\r\n             viewModal:false,\r\n           itemDel:'',\r\n           radius:false\r\n\r\n       }\r\n   },\r\n  created() {\r\n     this.getAllInfoUsr('usuarios')\r\n  },\r\n  \r\n  computed:{\r\n     data() {\r\n          let data = this.$store.getters[\"usuarios/data\"];\r\n\r\n          if(!Array.isArray(data)) return []\r\n\r\n          if(this.search_value !=''){\r\n            let filt = data.filter(item => this.includesItem(this.search_value, item.name) )\r\n            data = filt\r\n          }\r\n\r\n          return data\r\n      },\r\n         historyOption(){\r\n            return this.$store.getters[\"usuarios/getHistoryOption\"]\r\n        },\r\n\r\n        \r\n          //Paginacion\r\n        allItems () {\r\n            return Object.keys(this.data).map(pid => this.data[pid])\r\n        },\r\n        filteredItems () {\r\n        \r\n             return  this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage )\r\n        },\r\n        totalPages () {\r\n            let total = Math.ceil(this.allItems.length / this.itemsPerPage)\r\n                if(total < this.currentPage){\r\n                this.currentPage =1\r\n                }\r\n        return total\r\n       },\r\n  },\r\n  methods:{\r\n        \r\n       ...mapActions('usuarios', ['getAllInfoUsr']),\r\n           ...mapActions('usuarios', ['setHistoryOptionUsr']),\r\n         ...mapActions('usuarios', ['setAddedUsr']),\r\n         includesItem(search, name){\r\n            name = name.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\r\n          if(search ==''){\r\n            return true\r\n          }\r\n          name = name.toLowerCase()\r\n          search= search.toLowerCase()\r\n          if(search ==''){\r\n              return false;\r\n          }\r\n          return name.includes(search)\r\n        },\r\n           changeView(option, item){\r\n             this.item=item\r\n             this.setAddedUsr(item)\r\n             this.setHistoryOptionUsr(option)\r\n         },\r\n\r\n         activeRadius(){\r\n             this.radius? this.radius =false:  this.radius =true;\r\n         },\r\n\r\n         showModal: function(id){\r\n             this.itemDel =id;\r\n             this.viewModal=true\r\n         },\r\n         closeModal:function(){\r\n             this.viewModal=false;\r\n             this.itemDel =''\r\n         },\r\n\r\n           wait: function(){\r\n            setTimeout(() => this.$router.go(), 200);\r\n        },\r\n\r\n          delStatus: function () {\r\n            setTimeout(() => this.delMsgs()\r\n            ,2000);\r\n            setTimeout(() => this.wait()\r\n            ,500);\r\n            \r\n        },\r\n        delMsgs: function(){\r\n            this.status=\"\"\r\n            this.message=\"\"\r\n        },\r\n\r\n        eliminar: async function(){\r\n            let id = this.itemDel\r\n            this.status='';\r\n            this.message='';\r\n\r\n             let result = await this.$store.dispatch(\"usuarios/deleteItemUsr\", {option: 'user', id:id});\r\n           \r\n            if(result.status=='error'){\r\n            this.message = result.message;\r\n            this.status='error'\r\n            this.delStatus()\r\n           \r\n            }else{\r\n                this.status='';\r\n                this.message='';\r\n                this.wait()\r\n            }\r\n         },\r\n          closeSelect(){\r\n      document.getElementById(\"select-ch\").checked = false;\r\n      this.active = false;\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n      \r\n\r\n\r\n         // botones de paginacion.\r\n         next () {\r\n          \r\n          if ( this.currentPage < this.totalPages) {\r\n            this.currentPage++\r\n          }\r\n        },\r\n        prev () {\r\n          if (this.currentPage > 1) {\r\n            this.currentPage--\r\n          }\r\n        },\r\n\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n.tbl_usuarios{\r\n      margin-top: 1.9791666666666665VW;\r\n         width: 48.4VW;\r\n}\r\n\r\n.tbl_items{\r\n      border-bottom: 1px solid var(--color-3);\r\n}\r\n\r\n.tbl_item{\r\n    overflow: auto;\r\n}\r\n      .tblh{\r\n            width: 10.78125VW;\r\n            height: 2.5VW;\r\n            background: var(--color-2);\r\n            border-right: 1px solid  var(--color-5);\r\n           \r\n      }\r\n       .tblh2{\r\n            width: 2.5VW;\r\n            height: 2.5VW;\r\n            background: var(--color-3);\r\n            border-right: 1px solid  var(--color-5);\r\n           \r\n      }\r\n      .tblh p{\r\n             padding-left: 1.3541666666666667VW;\r\n             color: var(--color-5);\r\n             font-size: 0.7291666666666666VW;\r\n             font-weight: 500;\r\n      }\r\n      .tblh2 p{\r\n             padding-top: 0.5VW;\r\n             padding-left: .3vw;\r\n             color: var(--color-5);\r\n             font-size: 0.46875VW;\r\n             font-weight: 700;\r\n      }\r\n\r\n       .icon_editar , .icon_eliminar{\r\n            width: 2.5VW;\r\n            height: 2.5VW; \r\n            \r\n      }\r\n\r\n       .icon_editar img , .icon_eliminar img{\r\n       \r\n             width:  0.8333333333333334VW;\r\n            height:   0.8333333333333334VW; \r\n            padding-top: .9vw;\r\n            padding-left: .9vw;\r\n            cursor: pointer;\r\n      }\r\n      .tblrad{\r\n            border-radius: 1.5vw 0vw 0vw 1.5vw;\r\n      }\r\n\r\n      .tblh2r{\r\n            border-radius:  0vw .5vw .5vw 0vw ;\r\n      }\r\n\r\n      .tbl_item{\r\n             width: 10.78125VW;\r\n      } .tbl_item p{\r\n             padding-left: 1.3541666666666667VW;\r\n      }\r\n\r\n      .mlf{\r\n          margin-left: 43VW !important;\r\n      }\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}